generator client {
  provider = "prisma-client-js"
  // previewFeatures = ["mongodb"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model users {
  id               String             @id @default(cuid())
  email            String?            @unique
  name             String
  image            String?
  phone            String?            @unique
  birthday         String?
  gender           String?
  role             Int                @default(1)
  uid              String?
  address          Json?
  createdAt        DateTime           @default(now())
  seller           seller[]
  brand            brands[]
  products         products[]
  comments         comments[]
  reviews          reviews[]
  notifications    notifications[]
  pushToken        String?
  flashSellProduct flashSellProduct[]
  verified         Boolean            @default(true)
  conversations    conversations[]
  orders           orders[]
  cart             cart[]
  wish             wish[]
  active           Boolean            @default(false)
  socketId         String?            @unique
}

model category {
  id          String        @id @default(cuid())
  name        String        @unique
  icon        String
  subCategory subCategory[]
  products    products[]
}

model subCategory {
  id         String     @id @default(cuid())
  name       String     @unique
  categoryId String
  category   category?  @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  options    options[]
  products   products[]
}

model options {
  id            String       @id @default(cuid())
  name          String
  subCategoryId String
  subCategory   subCategory? @relation(fields: [subCategoryId], references: [id], onDelete: Cascade)
  products      products[]
}

model seller {
  id          String     @id @default(cuid())
  userId      String
  user        users?     @relation(fields: [userId], references: [id], onDelete: Cascade)
  shopName    String     @unique
  shopAddress String
  categories  Json?
  logo        String
  products    products[]
  verified    Boolean    @default(false)
  reviews     reviews[]
  createdAt   DateTime   @default(now())
}

model brands {
  id           String     @id @default(cuid())
  userId       String
  user         users?     @relation(fields: [userId], references: [id], onDelete: Cascade)
  brandName    String     @unique
  brandAddress String
  brandIcon    String
  categories   Json?
  products     products[]
  verified     Boolean    @default(true)
  reviews      reviews[]
  createdAt    DateTime   @default(now())
}

model products {
  id               String             @id @default(cuid())
  price            Int
  coin             Boolean            @default(false)
  title            String
  description      String             @db.VarChar(10000)
  thumbnail        String
  quantity         Int                @default(1)
  minOrder         Int                @default(1)
  freeCoin         Int                @default(0)
  offer            Int                @default(0)
  vat              Float              @default(0)
  deliveryCharge   Int?
  percentage       Boolean            @default(false)
  freeDelivery     Boolean            @default(false)
  fixedPrice       Boolean            @default(true)
  createdAt        DateTime           @default(now())
  colors           Json?
  sizes            Json?
  specifications   Json?
  images           Json?
  comments         comments[]
  reviews          reviews[]
  flashSellProduct flashSellProduct[]
  verified         Boolean            @default(true)
  sellerId         String?
  seller           seller?            @relation(fields: [sellerId], references: [id], onDelete: Cascade)
  brandId          String?
  brand            brands?            @relation(fields: [brandId], references: [id], onDelete: Cascade)
  category         category?          @relation(fields: [categoryId], references: [id])
  categoryId       String
  subCategoryId    String
  subCategory      subCategory?       @relation(fields: [subCategoryId], references: [id])
  optionId         String
  option           options?           @relation(fields: [optionId], references: [id])
  userId           String
  user             users?             @relation(fields: [userId], references: [id], onDelete: Cascade)
  banner           banner[]
  adds             adds[]
  conversations    conversations[]
  orders           orders[]
  slider           slider[]
  cart             cart[]
  wish             wish[]
  product_visitors product_visitors[]
}

model colors {
  id    String @id @default(cuid())
  title String @unique
  color String
}

model size {
  id    String @id @default(cuid())
  title String @unique
  cm    String
}

model specifications {
  id      String @id @default(cuid())
  title   String @unique
  details String
}

model comments {
  id            String          @id @default(cuid())
  message       String
  image         String?
  replay        String?
  userId        String
  user          users?          @relation(fields: [userId], references: [id], onDelete: Cascade)
  productId     String
  product       products?       @relation(fields: [productId], references: [id], onDelete: Cascade)
  notifications notifications[]
}

model reviews {
  id            String          @id @default(cuid())
  message       String
  rate          Float           @default(0)
  userId        String
  user          users?          @relation(fields: [userId], references: [id], onDelete: Cascade)
  productId     String
  product       products?       @relation(fields: [productId], references: [id], onDelete: Cascade)
  notifications notifications[]
  sellerId      String?
  seller        seller?         @relation(fields: [sellerId], references: [id], onDelete: Cascade)
  brandId       String?
  brand         brands?         @relation(fields: [brandId], references: [id], onDelete: Cascade)
}

model notifications {
  id        String    @id @default(cuid())
  message   String
  title     String
  userId    String
  user      users?    @relation(fields: [userId], references: [id], onDelete: Cascade)
  commentId String
  comments  comments? @relation(fields: [commentId], references: [id], onDelete: Cascade)
  reviewId  String
  reviews   reviews?  @relation(fields: [reviewId], references: [id], onDelete: Cascade)
}

model flashSell {
  id      String             @id @default(cuid())
  startAt DateTime
  endAt   DateTime
  banner  String
  title   String             @unique
  product flashSellProduct[]
}

model flashSellProduct {
  id           String     @id @default(cuid())
  offer        Int        @default(0)
  percentage   Boolean    @default(false)
  minSell      Int        @default(1)
  quantity     Int        @default(1)
  deliveryFree Boolean    @default(false)
  flashSellId  String
  flashSell    flashSell? @relation(fields: [flashSellId], references: [id], onDelete: Cascade)
  productId    String
  product      products?  @relation(fields: [productId], references: [id], onDelete: Cascade)
  userId       String
  user         users?     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt    DateTime   @default(now())
}

model contacts {
  id          String   @id @default(cuid())
  title       String
  description String   @db.VarChar(300)
  name        String
  phone       String
  email       String
  date        DateTime @default(now())
  replied     Boolean  @default(false)
}

model conversations {
  id         String     @id @default(cuid())
  senderId   String
  receiver   users?     @relation(fields: [receiverId], references: [id], onDelete: Cascade)
  receiverId String
  date       DateTime   @default(now())
  productId  String
  product    products?  @relation(fields: [productId], references: [id], onDelete: Cascade)
  messages   messages[]
}

model messages {
  id             String         @id @default(cuid())
  message        String?
  image          String?
  date           DateTime       @default(now())
  conversationId String
  conversation   conversations? @relation(fields: [conversationId], references: [id], onDelete: Cascade)
}

model orders {
  id             String   @id @default(cuid())
  buyerId        String
  buyer          users    @relation(fields: [buyerId], references: [id], onDelete: Cascade)
  productId      String
  product        products @relation(fields: [productId], references: [id], onDelete: Cascade)
  offerPrice     Int      @default(0)
  date           DateTime @default(now())
  status         String   @default("PENDING")
  price          Int      @default(0)
  quantity       Int      @default(1)
  colors         Json?
  sizes          Json?
  specifications Json?
  paymentMethod  String
  address        Json?
}

model banner {
  id        String    @id @default(cuid())
  title     String    @unique
  image     String
  productId String
  product   products? @relation(fields: [productId], references: [id], onDelete: Cascade)
  date      DateTime  @default(now())
}

model slider {
  id        String    @id @default(cuid())
  title     String    @unique
  image     String
  productId String
  product   products? @relation(fields: [productId], references: [id], onDelete: Cascade)
  date      DateTime  @default(now())
}

model cart {
  id        String    @id @default(cuid())
  userId    String
  user      users?    @relation(fields: [userId], references: [id], onDelete: Cascade)
  productId String
  product   products? @relation(fields: [productId], references: [id], onDelete: Cascade)
  quantity  Int       @default(1)
}

model wish {
  id        String    @id @default(cuid())
  userId    String
  user      users?    @relation(fields: [userId], references: [id], onDelete: Cascade)
  productId String
  product   products? @relation(fields: [productId], references: [id], onDelete: Cascade)
}

model adds {
  id        String          @id @default(cuid())
  title     String          @unique
  image     String
  productId String
  product   products?       @relation(fields: [productId], references: [id], onDelete: Cascade)
  date      DateTime        @default(now())
  visitors  adds_visitors[]
}

model adds_visitors {
  id         String    @id @default(cuid())
  visitorsId String
  visitors   visitors? @relation(fields: [visitorsId], references: [id])
  adds       adds?     @relation(fields: [addId], references: [id])
  addId      String?
}

model product_visitors {
  id           String    @id @default(cuid())
  visitorsId   String?
  visitorsInfo visitors? @relation(fields: [visitorsId], references: [id], onDelete: Cascade)
  productInfo  products? @relation(fields: [productsId], references: [id], onDelete: Cascade)
  productsId   String?
  createdAt    DateTime  @default(now())
}

model visitors {
  id               String             @id @default(cuid())
  ip               String
  deviceName       String
  randomId         String             @unique
  date             DateTime           @default(now())
  uid              String?
  adds_visitors    adds_visitors[]
  product_visitors product_visitors[]
}
